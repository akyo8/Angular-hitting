<div class="content full-width">
    <div class="widget calculator">
        <!-- 1st level -->
        <article class="featured">
            <div class="group">
                <header>
                    <div class="label">
                        <h3>List Price</h3>
                        <div class="tab-selector-inline cftoggle-position calc" (click)="$event.stopPropagation(); $event.preventDefault()">
                            <ul>
                                <li [ngClass]="{'active': coctab == 'tab-cash'}"
                                    (click)="selectCoC('tab-cash', 'cash')">Cash</li>
                                <li [ngClass]="{'active': coctab == 'tab-financed'}"
                                    (click)="selectCoC('tab-financed', 'financed')">Financed</li>
                            </ul>
                        </div>
                    </div>
                    <div class="value">
                        <span class="currency">$</span>
                        <span class="value">{{propertyService.getListPrice()}}</span>
                    </div>
                </header>
            </div>
        </article>
        <!-- /1st level -->
        <!-- 1st level -->
        <article>
            <div class="group">
                <header>
                    <div class="label">
                        <h3>Market Value</h3>
                        <bourbon-select [model]="propertyService.propertyCommon.market.type"
                            (modelUpdate)="propertyService.propertyCommon.market.type = $event; propertyService.updatePropertyRentTotals()"
                            [options]="propertyService.propertyRentListPriceTypes">
                        </bourbon-select>
                    </div>
                    <div class="value" [ngClass]="{editable: propertyService.propertyCommon.market.type == 'other'}">
                        <span class="currency">$</span>
                        <span class="value" *ngIf="propertyService.propertyCommon.market.type != 'other'">{{propertyService.property.market[propertyService.propertyCommon.market.type] | number:'1.0-0'}}</span>
                        <span class="input-value" *ngIf="propertyService.propertyCommon.market.type == 'other'">
                            <input class="input-field" type="number" step="100" [(ngModel)]="propertyService.propertyCommon.market.otherValue" />
                        </span>
                    </div>
                </header>
            </div>
        </article>
        <!-- /1st level -->
        <!-- 1st level -->
        <article>
            <div class="group values-two-column">
                <header>
                    <div class="label">
                        <h3>Rents</h3>
                        <bourbon-select [model]="propertyService.propertyRent.rent.type"
                            (modelUpdate)="propertyService.propertyRent.rent.type = $event; propertyService.updatePropertyRentTotals()"
                            [options]="propertyService.propertyRentPriceTypes">
                        </bourbon-select>
                    </div>
                    <div class="values">
                        <div class="value" [ngClass]="{editable: propertyService.propertyRent.rent.type == 'other'}">
                            <span class="currency">$</span>
                            <span class="value" *ngIf="propertyService.propertyRent.rent.type != 'other'">{{propertyService.propertyRent.rent.value | number:'1.0-0'}}</span>
                            <span class="input-value" *ngIf="propertyService.propertyRent.rent.type == 'other'">
                                <input type="number" step="100" [(ngModel)]="propertyService.propertyRent.rent.otherValue" />
                            </span>
                        </div>
                        <div class="value">
                            <span class="currency">$</span>
                            <span class="value" *ngIf="propertyService.propertyRent.rent.type != 'other'">{{(propertyService.propertyRent.rent.value * 12) | number:'1.0-0'}}</span>
                            <span class="value" *ngIf="propertyService.propertyRent.rent.type == 'other'">{{(propertyService.propertyRent.rent.otherValue * 12) | number:'1.0-0'}}</span>
                        </div>
                    </div>
                </header>
            </div>
        </article>
        <!-- /1st level -->
        <!-- 1st level -->
        <article>
            <div class="group">
            <accordion class="group values-two-column">
                <accordion-group class="accordion">
                    <accordion-heading class="accordion-header calc-gray-gradient">
                        <header>
                            <div class="label">
                                <h3>Expenses</h3>
                            </div>
                            <div class="values">
                                <div class="value">
                                    <span class="currency">$</span>
                                    <span class="value">{{(propertyService.propertyRentData.expensesSubtotal * 12) | number:'1.0-0'}}</span>
                                </div>
                                <div class="value">
                                    <span class="currency">$</span>
                                    <span class="value">{{propertyService.propertyRentData.expensesSubtotal | number:'1.0-0'}}</span>
                                </div>
                            </div>
                        </header>
                    </accordion-heading>
                    <div class="subsection-wrap">
                        <div class="subsection-content subsection-a">
                            <div class="group values-two-column">
                                <header>
                                    <div class="label">
                                        <h3>Real Estate Taxes</h3>
                                    </div>
                                    <div class="values">
                                        <div class="value editable value-wrap">
                                            <span class="currency">$</span>
                                            <span class="input-value">
                                                <input class="input-field" type="number" step="1" [(ngModel)]="propertyService.propertyRent.expenses.realEstateTaxes" />
                                            </span>
                                        </div>
                                        <div class="value value-wrap">
                                            <span class="currency">$</span>
                                            <span class="value">{{(propertyService.propertyRent.expenses.realEstateTaxes * 12) | number:'1.0-0'}}</span>
                                        </div>
                                    </div>
                                </header>
                            </div>
                            <div class="group values-two-column">
                                    <header>
                                        <div class="label">
                                            <h3>Insurance</h3>
                                        </div>
                                        <div class="values">
                                            <div class="value editable value-wrap">
                                                <span class="currency">$</span>
                                                <span class="input-value">
                                                    <input class="input-field" type="number" step="1" [(ngModel)]="propertyService.propertyRent.expenses.insurance" />
                                                </span>
                                            </div>
                                            <div class="value value-wrap">
                                                <span class="currency">$</span>
                                                <span class="value">{{(propertyService.propertyRent.expenses.insurance * 12) | number:'1.0-0'}}</span>
                                            </div>
                                        </div>
                                    </header>
                            </div>
                            <div class="group values-two-column">
                                <header>
                                    <div class="label">
                                        <h3>Vacancy Rate</h3>
                                        <div class="editable left-col-pct">
                                            <span class="input-value">
                                                <input class="input-field" type="text" placeholder="Vacancy %" [textMask]="{mask: percentMask, pipeValue: decimalPercent}"
                                                    [ngModel]="decimalToPercent(propertyService.propertyRent.expenses.vacancyRatePercent)"
                                                    (ngModelChange)="propertyService.propertyRent.expenses.vacancyRatePercent = $event" />
                                            </span>
                                        </div>
                                    </div>
                                    <div class="values">
                                        <div class="value value-wrap">
                                            <span class="currency">$</span>
                                            <span class="value">{{propertyService.propertyRentData.expenses.vacancyRate | number:'1.0-0'}}</span>
                                        </div>
                                        <div class="value value-wrap">
                                            <span class="currency">$</span>
                                            <span class="value">{{(propertyService.propertyRentData.expenses.vacancyRate * 12) | number:'1.0-0'}}</span>
                                        </div>
                                    </div>
                                </header>
                            </div>
                            <div class="group values-two-column">
                                <header>
                                    <div class="label">
                                        <h3>Maintenance</h3>
                                        <div class="editable left-col-pct">
                                            <span class="input-value">
                                                <input class="input-field" type="text" placeholder="Maintenance %" [textMask]="{mask: percentMask, pipeValue: decimalPercent}"
                                                    [ngModel]="decimalToPercent(propertyService.propertyRent.expenses.maintenancePercent)"
                                                    (ngModelChange)="propertyService.propertyRent.expenses.maintenancePercent = $event" />
                                            </span>
                                        </div>
                                    </div>
                                    <div class="values">
                                        <div class="value value-wrap">
                                            <span class="currency">$</span>
                                            <span class="value">{{propertyService.propertyRentData.expenses.maintenance | number:'1.0-0'}}</span>
                                        </div>
                                        <div class="value value-wrap">
                                            <span class="currency">$</span>
                                            <span class="value">{{(propertyService.propertyRentData.expenses.maintenance * 12) | number:'1.0-0'}}</span>
                                        </div>
                                    </div>
                                </header>
                            </div>
                            <div class="group values-two-column">
                                <header>
                                    <div class="label">
                                        <h3>Management</h3>
                                        <div class="editable left-col-pct">
                                            <span class="input-value">
                                                <input class="input-field" type="text" placeholder="Management %" [textMask]="{mask: percentMask, pipeValue: decimalPercent}"
                                                    [ngModel]="decimalToPercent(propertyService.propertyRent.expenses.managementPercent)"
                                                    (ngModelChange)="propertyService.propertyRent.expenses.managementPercent = $event" />
                                            </span>
                                        </div>
                                    </div>
                                    <div class="values">
                                        <div class="value value-wrap">
                                            <span class="currency">$</span>
                                            <span class="value">{{propertyService.propertyRentData.expenses.management | number:'1.0-0'}}</span>
                                        </div>
                                        <div class="value value-wrap">
                                            <span class="currency">$</span>
                                            <span class="value">{{(propertyService.propertyRentData.expenses.management * 12) | number:'1.0-0'}}</span>
                                        </div>
                                    </div>
                                </header>
                            </div>
                            <div class="group values-two-column" *ngIf="coctab != 'tab-cash'">
                                <header>
                                    <div class="label">
                                        <h3>Mortgage Payment</h3>
                                    </div>
                                    <div class="values">
                                        <div class="value editable value-wrap">
                                            <span class="currency">$</span>
                                            <span class="value" *ngIf="'other' != propertyService.propertyRent.expenses.mortgage.selected">{{propertyService.propertyRentData.expenses.mortgageSelectedValue | number:'1.0-0'}}</span>
                                            <span class="input-value" *ngIf="'other' == propertyService.propertyRent.expenses.mortgage.selected">
                                                <input class="input-field" type="number" step="1" [(ngModel)]="propertyService.propertyRent.expenses.mortgage.otherValue" />
                                            </span>
                                        </div>
                                        <div class="value value-wrap">
                                            <span class="currency">$</span>
                                            <span class="value">{{(propertyService.propertyRentData.expenses.mortgageSelectedValue * 12) | number:'1.0-0'}}</span>
                                        </div>
                                    </div>
                                </header>
                            </div>
                            <div class="group values-two-column" *ngIf="propertyService.getCurrentProperty().mls.hoaFee">
                                <header>
                                    <div class="label">
                                        <h3>HOA</h3>
                                    </div>
                                    <div class="values">
                                        <div class="value editable value-wrap">
                                            <span class="currency">$</span>
                                            <span class="input-value">
                                                <input class="input-field" type="number" step="1" [(ngModel)]="propertyService.propertyRent.expenses.hoa" />
                                            </span>
                                        </div>
                                        <div class="value value-wrap">
                                            <span class="currency">$</span>
                                            <span class="value">{{(propertyService.propertyRent.expenses.hoa * 12) | number:'1.0-0'}}</span>
                                        </div>
                                    </div>
                                </header>
                            </div>
                            <div class="group values-two-column">
                                <header>
                                    <div class="label">
                                        <h3>Other</h3>
                                    </div>
                                    <div class="values">
                                        <div class="value editable value-wrap">
                                            <span class="currency">$</span>
                                            <span class="input-value">
                                                <input class="input-field" type="number" step="1" [(ngModel)]="propertyService.propertyRent.expenses.other" />
                                            </span>
                                        </div>
                                        <div class="value value-wrap">
                                            <span class="currency">$</span>
                                            <span class="value">{{(propertyService.propertyRent.expenses.other * 12) | number:'1.0-0'}}</span>
                                        </div>
                                    </div>
                                </header>
                            </div>
                        </div>
                    </div>
                </accordion-group>
            </accordion>
            </div>
        </article>
        <!-- /1st level -->
        <!-- 1st level -->
        <article>
            <div class="group values-two-column">
                <header>
                    <div class="label">
                        <h3>Net Income</h3>
                    </div>
                    <div class="values">
                        <div class="value">
                            <span class="currency">$</span>
                            <span class="value">{{propertyService.propertyRent.income.net | number:'1.0-0'}}</span>
                        </div>
                        <div class="value">
                            <span class="currency">$</span>
                            <span class="value">{{(propertyService.propertyRent.income.net * 12) | number:'1.0-0'}}</span>
                        </div>
                    </div>
                </header>
            </div>
        </article>
        <!-- /1st level -->
        <!-- 1st level -->
        <article>
            <div class="group slider">
                <header>
                    <div class="label">
                        <h3>Cap</h3>
                    </div>
                    <div class="slider">
                        <div class="handle"
                            slideAble
                            slideDirection="horisontal"
                            (onSliding)="handleChangeCapIncome($event)"
                            (onStopSliding)="handleFixCapIncomePercent($event)"
                            [ngStyle]="{'left': propertyService.propertyRentData.absBaseCapFormatted}">
                            <span>CAP {{propertyService.propertyRentData.capFormatted}}</span>
                        </div>
                    </div>
                    <div class="value">
                        <span class="value">{{propertyService.propertyRentData.capFormatted}}</span>
                    </div>
                </header>
            </div>
        </article>
        <!-- /1st level -->
        <!-- 1st level -->
        <article class="featured">
            <div class="group">
                <accordion class="group values-two-column">
                    <accordion-group class="accordion">
                        <accordion-heading class="accordion-header calc-red-gradient">
                            <header>
                                <div class="label">
                                    <h3>Top Bid</h3>
                                </div>
                                <div class="values">
                                    <div class="value">
                                        <span class="currency">$</span>
                                        <span class="value">{{ propertyService.propertyRentData.maxBid | number:'1.0-0'}}</span>
                                    </div>
                                </div>
                            </header>
                        </accordion-heading>
                        <div class="subsection-wrap">
                            <div class="subsection-content subsection-a">
                                <div class="group values-two-column">
                                    <!-- begin Property Closing Costs nested accordion -->
                                    <accordion>
                                        <accordion-group class="accordion">
                                            <accordion-heading class="accordion-header">
                                                <div class="label">
                                                    <h3>Purchase Closing Costs</h3>
                                                </div>
                                                <div class="values">
                                                    <div class="value value-wrap">
                                                        <span class="currency">$</span>
                                                        <span class="value">{{propertyService.propertyRentData.purchaseClosingCostTotal | number:'1.0-0'}}</span>
                                                    </div>
                                                </div>
                                                <div class="clearfix"></div>
                                            </accordion-heading>
                                            <div class="subsection-wrap">
                                                <div class="subsection-content subsection-a">
                                                        <div class="group values-two-column label-only">
                                                            <header>
                                                                <div class="values">
                                                                    <div class="value label">Cash</div>
                                                                    <div class="value label">Financed</div>
                                                                </div>
                                                            </header>
                                                        </div>
                                                        <div class="group values-two-column" [ngClass]="{'is-dim-faded': !propertyService.propertyRent.purchaseClosingCost.buyerPays}">
                                                            <header>
                                                                <div class="label">
                                                                    <div class="calctooltip checkbox">
                                                                        <input type="checkbox" [(ngModel)]="propertyService.propertyRent.purchaseClosingCost.buyerPays" style="margin-top: -15px" />
                                                                        <span class="calctooltiptext">The convention in Texas is for the Seller to pay this premium— check this box if the Buyer is paying.</span>
                                                                    </div>
                                                                    <h3>
                                                                        <div class="calctooltip">Title Policy
                                                                            <span class="calctooltiptext">The title policy premium displayed is based on the current tax value. It is indicative of Basic coverage and may vary depending on the final Purchase price and any additional endorsements you may request. The convention in Texas is for the Seller to pay the premium; Buyer may pay in selected cases.</span>
                                                                        </div>
                                                                    </h3>
                                                                </div>
                                                                <div class="values">
                                                                    <div class="value editable">
                                                                        <span class="currency">$</span>
                                                                        <span class="input-value">
                                                                            <input class="input-field" type="number" step="1"
                                                                                [(ngModel)]="propertyService.propertyRent.purchaseClosingCost.cash.titlePolicy"
                                                                                [disabled]="propertyService.propertyRent.purchaseClosingCost.selected == 'financed'" />
                                                                        </span>
                                                                    </div>
                                                                    <div class="value editable">
                                                                        <span class="currency">$</span>
                                                                        <span class="input-value">
                                                                            <input class="input-field" type="number" step="1"
                                                                                [(ngModel)]="propertyService.propertyRent.purchaseClosingCost.financed.titlePolicy"
                                                                                [disabled]="propertyService.propertyRent.purchaseClosingCost.selected == 'cash'" />
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </header>
                                                        </div>
                                                        <div class="group values-two-column">
                                                            <header>
                                                                <div class="label">
                                                                    <h3>Title Company Fees</h3>
                                                                </div>
                                                                <div class="values">
                                                                    <div class="value editable">
                                                                        <span class="currency">$</span>
                                                                        <span class="input-value">
                                                                            <input class="input-field" type="number" step="1"
                                                                                [(ngModel)]="propertyService.propertyRent.purchaseClosingCost.cash.titleCompanyFees"
                                                                                [disabled]="propertyService.propertyRent.purchaseClosingCost.selected == 'financed'" />
                                                                        </span>
                                                                    </div>
                                                                    <div class="value editable">
                                                                        <span class="currency">$</span>
                                                                        <span class="input-value">
                                                                            <input class="input-field" type="number" step="1"
                                                                                [(ngModel)]="propertyService.propertyRent.purchaseClosingCost.financed.titleCompanyFees"
                                                                                [disabled]="propertyService.propertyRent.purchaseClosingCost.selected == 'cash'" />
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </header>
                                                        </div>
                                                        <div class="group values-two-column">
                                                            <header>
                                                                <div class="label">
                                                                    <h3>Title Company Escrow Fees</h3>
                                                                </div>
                                                                <div class="values">
                                                                    <div class="value editable">
                                                                        <span class="currency">$</span>
                                                                        <span class="input-value">
                                                                            <input class="input-field" type="number" step="1"
                                                                                [(ngModel)]="propertyService.propertyRent.purchaseClosingCost.cash.titleCompanyEscrowFees"
                                                                                [disabled]="propertyService.propertyRent.purchaseClosingCost.selected == 'financed'" />
                                                                        </span>
                                                                    </div>
                                                                    <div class="value editable">
                                                                        <span class="currency">$</span>
                                                                        <span class="input-value">
                                                                            <input class="input-field" type="number" step="1"
                                                                                [(ngModel)]="propertyService.propertyRent.purchaseClosingCost.financed.titleCompanyEscrowFees"
                                                                                [disabled]="propertyService.propertyRent.purchaseClosingCost.selected == 'cash'" />
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </header>
                                                        </div>
                                                        <div class="group values-two-column" *ngIf="propertyService.getCurrentProperty().mls.hoaFee">
                                                            <header>
                                                                <div class="label">
                                                                    <h3>HOA</h3>
                                                                    <div class="calctooltip checkbox">
                                                                        <input type="checkbox" [(ngModel)]="propertyService.propertyRent.purchaseClosingCost.resaleCertificate" style="margin-top: -15px" />
                                                                        <span class="calctooltiptext">Check this box to include a HOA resale certificate.</span>
                                                                    </div>
                                                                </div>
                                                                <div class="values">
                                                                    <div class="value ">
                                                                        <span class="currency">$</span>
                                                                        <span class="value">{{propertyService.propertyRent.purchaseClosingCost.cash.hoa | number:'1.0-0'}}</span>
                                                                    </div>
                                                                    <div class="value">
                                                                        <span class="currency">$</span>
                                                                        <span class="value">{{propertyService.propertyRent.purchaseClosingCost.financed.hoa | number:'1.0-0'}}</span>
                                                                    </div>
                                                                </div>
                                                            </header>
                                                        </div>
                                                        <div class="group values-two-column">
                                                            <header>
                                                                <div class="label">
                                                                    <h3>Insurance</h3>
                                                                </div>
                                                                <div class="values">
                                                                    <div class="value editable">
                                                                        <span class="currency">$</span>
                                                                        <span class="input-value">
                                                                            <input class="input-field" type="number" step="1"
                                                                                [(ngModel)]="propertyService.propertyRent.purchaseClosingCost.cash.insurance"
                                                                                [disabled]="propertyService.propertyRent.purchaseClosingCost.selected == 'financed'" />
                                                                        </span>
                                                                    </div>
                                                                    <div class="value editable">
                                                                        <span class="currency">$</span>
                                                                        <span class="input-value">
                                                                            <input class="input-field" type="number" step="1"
                                                                                [(ngModel)]="propertyService.propertyRent.purchaseClosingCost.financed.insurance"
                                                                                [disabled]="propertyService.propertyRent.purchaseClosingCost.selected == 'cash'" />
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </header>
                                                        </div>
                                                        <!--div class="group values-two-column">
                                                            <header>
                                                                <div class="label">
                                                                    <h3>Real Estate Taxes</h3>
                                                                </div>
                                                                <div class="values">
                                                                    <div class="value ">
                                                                        <span class="currency">$</span>
                                                                        <span class="value">{{propertyService.propertyRent.purchaseClosingCost.cash.realEstateTaxes | number:'1.0-0'}}</span>
                                                                    </div>
                                                                    <div class="value">
                                                                        <span class="currency">$</span>
                                                                        <span class="value">{{propertyService.propertyRent.purchaseClosingCost.financed.realEstateTaxes | number:'1.0-0'}}</span>
                                                                    </div>
                                                                </div>
                                                            </header>
                                                        </div-->
                                                        <div class="group values-two-column">
                                                            <header>
                                                                <div class="label">
                                                                    <h3>Survey</h3>
                                                                </div>
                                                                <div class="values">
                                                                    <div class="value editable">
                                                                        <span class="currency">$</span>
                                                                        <span class="input-value">
                                                                            <input class="input-field" type="number" step="1"
                                                                                [(ngModel)]="propertyService.propertyRent.purchaseClosingCost.cash.survey"
                                                                                [disabled]="propertyService.propertyRent.purchaseClosingCost.selected == 'financed'" />
                                                                        </span>
                                                                    </div>
                                                                    <div class="value editable">
                                                                        <span class="currency">$</span>
                                                                        <span class="input-value">
                                                                            <input class="input-field" type="number" step="1"
                                                                                [(ngModel)]="propertyService.propertyRent.purchaseClosingCost.financed.survey"
                                                                                [disabled]="propertyService.propertyRent.purchaseClosingCost.selected == 'cash'" />
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </header>
                                                        </div>
                                                        <div class="group values-two-column" *ngIf="coctab != 'tab-cash'">
                                                            <header>
                                                                <div class="label">
                                                                    <h3>Loan Origination</h3>
                                                                </div>
                                                                <div class="values">
                                                                    <div class="value editable">
                                                                        <span class="currency">$</span>
                                                                        <span class="input-value">
                                                                            <input class="input-field" type="number" step="1"
                                                                                [(ngModel)]="propertyService.propertyRent.purchaseClosingCost.cash.loanOrigination"
                                                                                [disabled]="propertyService.propertyRent.purchaseClosingCost.selected == 'financed'" />
                                                                        </span>
                                                                    </div>
                                                                    <div class="value editable">
                                                                        <span class="currency">$</span>
                                                                        <span class="input-value">
                                                                            <input class="input-field" type="number" step="1"
                                                                                [(ngModel)]="propertyService.propertyRent.purchaseClosingCost.financed.loanOrigination"
                                                                                [disabled]="propertyService.propertyRent.purchaseClosingCost.selected == 'cash'" />
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </header>
                                                        </div>
                                                        <div class="group values-two-column is-dim-faded">
                                                            <header>
                                                                <div class="label">
                                                                    <h3>
                                                                        <div class="calctooltip">Transfer Tax
                                                                            <span class="calctooltiptext">Not applicable in Texas.</span>
                                                                        </div>
                                                                    </h3>
                                                                </div>
                                                                <div class="values">
                                                                    <div class="value editable">
                                                                        <span class="currency">$</span>
                                                                        <span class="input-value">
                                                                            <input class="input-field" type="number" step="1"
                                                                                [(ngModel)]="propertyService.propertyRent.purchaseClosingCost.cash.transferTax"
                                                                                [disabled]="propertyService.propertyRent.purchaseClosingCost.selected == 'financed'" />
                                                                        </span>
                                                                    </div>
                                                                    <div class="value editable">
                                                                        <span class="currency">$</span>
                                                                        <span class="input-value">
                                                                            <input class="input-field" type="number" step="1"
                                                                                [(ngModel)]="propertyService.propertyRent.purchaseClosingCost.financed.transferTax"
                                                                                [disabled]="propertyService.propertyRent.purchaseClosingCost.selected == 'cash'" />
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </header>
                                                        </div>
                                                        <div class="group values-two-column" *ngIf="coctab != 'tab-cash'">
                                                            <header>
                                                                <div class="label">
                                                                    <h3>Downpayment</h3>
                                                                    <div class="editable left-col-pct">
                                                                        <span class="input-value">
                                                                            <input class="input-field" type="text" placeholder="Downpayment %" [textMask]="{mask: percentMask, pipeValue: decimalPercent}"
                                                                                [ngModel]="decimalToPercent(propertyService.propertyRent.purchaseClosingCost.financed.loanDownPaymentFraction)"
                                                                                (ngModelChange)="propertyService.propertyRent.purchaseClosingCost.financed.loanDownPaymentFraction = $event"
                                                                                [disabled]="propertyService.propertyRent.purchaseClosingCost.selected == 'cash'" />
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <div class="values">
                                                                    <div class="value">
                                                                        <span class="value">$0</span>
                                                                    </div>
                                                                    <div class="value">
                                                                        <span class="currency">$</span>
                                                                        <span class="value">{{getLoanDownPaymentDollars()}}</span>
                                                                    </div>
                                                                </div>
                                                            </header>
                                                        </div>
                                                </div>
                                            </div>
                                        </accordion-group>
                                    </accordion>
                                </div>
                            </div>

                            <div class="subsection-content subsection-a">
                                <div class="group values-two-column">
                                    <!-- begin Repairs nested accordion -->
                                    <accordion>
                                        <accordion-group class="accordion">
                                            <accordion-heading class="accordion-header">
                                                <div class="label select-value-small">
                                                    <h3>Repair & Remodel</h3>
                                                    <span *ngIf="propertyService.getRentRepairsCondition() >= 0" style="font-weight: 300; font-size: 80% !important">
                                                        $ {{(propertyService.propertyRentData.repairTotal / propertyService.getCurrentProperty().building?.size?.bldgSize) | number:'1.0-2'}} / sqft
                                                    </span>
                                                </div>
                                                <div class="values">
                                                    <div class="value value-wrap">
                                                        <span class="currency">$</span>
                                                        <span class="value">{{propertyService.propertyRentData.repairTotal | number:'1.0-0'}}</span>
                                                    </div>
                                                </div>
                                                <div class="clearfix"></div>
                                            </accordion-heading>
                                            <div class="subsection-wrap">
                                                <div class="subsection-content subsection-a">
                                                    <div class="group" style="min-height: 250px; border-bottom: 4px solid #e7e7be">
                                                        <header [ngSwitch]="propertyService.getRentSelectedQuality()">
                                                            <div class="q-selector-image q1-example" *ngSwitchCase="0"></div>
                                                            <div class="q-selector-image q2-example" *ngSwitchCase="1"></div>
                                                            <div class="q-selector-image q3-example" *ngSwitchCase="2"></div>
                                                            <div class="q-selector-image q4-example" *ngSwitchCase="3"></div>
                                                            <div class="q-selector-image q5-example" *ngSwitchCase="4"></div>
                                                            <div class="q-selector-image q6-example" *ngSwitchCase="5"></div>
                                                            <div class="q-selector-controls">
                                                                <button type="button" class="q-selector-btn" (click)="selectNextQuality()">
                                                                    <svg width="20px" height="20px" viewBox="0 0 70 70" xml:space="preserve" *ngIf="propertyService.getRentSelectedQuality() > 0">
                                                                        <polyline fill="none" stroke="#636363" stroke-width="5" stroke-linecap="round" stroke-linejoin="round" points="10,65 40,35 70,65"></polyline>
                                                                    </svg>
                                                                </button>
                                                                <button type="button" class="q-selector-btn" style="margin-top: 140px" (click)="selectPrevQuality()">
                                                                    <svg width="20px" height="20px" viewBox="0 0 70 70" xml:space="preserve" *ngIf="propertyService.getRentSelectedQuality() < 5">
                                                                        <polyline fill="none" stroke="#636363" stroke-width="5" stroke-linecap="round" stroke-linejoin="round" points="10,35 40,65 70,35"></polyline>
                                                                    </svg>
                                                                </button>
                                                            </div>
                                                            <div class="label" style="width: 31%">
                                                                <h3 [innerHTML]="propertyService.getRepairConditionDescription(propertyService.getRentRepairsCondition())"
                                                                    style="font-size: 100% !important" *ngIf="propertyService.getFlipRepairsCondition() >= 0"></h3>
                                                                <h3 style="font-size: 100% !important" *ngIf="propertyService.getFlipRepairsCondition() < 0">
                                                                    <b>Condition Scores:</b>
                                                                    <br>Excellent C1 - Poor C6
                                                                    <br><br>- As repairs are added the condition score changes
                                                                    <br>- The score is in all places condition is needed
                                                                </h3>
                                                            </div>
                                                            <div class="label" style="width: 31%; min-height: 250px; border-left: 1px solid #e7e7be">
                                                                <h3 style="font-size: 100% !important"
                                                                    [innerHTML]="propertyService.getQualityDescription(propertyService.getRentSelectedQuality(), propertyService.getCurrentProperty().building?.summary?.levels)"></h3>
                                                            </div>
                                                        </header>
                                                    </div>
                                                    <div class="group values-two-column is-checkbox"
                                                        [ngClass]="{'is-dimmed': !propertyService.propertyRent.repairs.noRepairs}">
                                                        <header>
                                                            <div class="checkbox">
                                                                <input type="checkbox" checked
                                                                    [(ngModel)]="propertyService.propertyRent.repairs.noRepairs"
                                                                    (click)="propertyService.toggleRentNoRepairs()" />
                                                            </div>
                                                            <div class="label">
                                                                <h3>No Repairs Necessary</h3>
                                                            </div>
                                                            <div class="values">
                                                                <div class="value"></div>
                                                                <div class="value" style="pointer-events: initial; opacity: 1">
                                                                    <button type="button" class="q-selector-btn" (click)="propertyService.cleanAndRecalcRentRepairs()">Save</button>
                                                                </div>
                                                            </div>
                                                        </header>
                                                    </div>
                                                    <div *ngFor="let item of propertyService.getCurrentRentRepairItems()"
                                                        class="group values-two-column is-checkbox" [ngClass]="{'is-dimmed': !item.included, 'is-locked': false}">
                                                        <header>
                                                            <div class="checkbox">
                                                                <input type="checkbox" checked [(ngModel)]="item.included" (click)="propertyService.toggleRentRepairIncluded(item)" />
                                                            </div>
                                                            <div class="label">
                                                                <h3 *ngIf="!item.labelTooltip">{{item.labelName}}</h3>
                                                                <h3 *ngIf="item.labelTooltip">
                                                                    <div class="calctooltip">{{item.labelName}} <span class="calctooltiptext">{{item.labelTooltip}}</span></div>
                                                                </h3>
                                                                <div class="description" *ngIf="item.labelIntermediary && itemHasSourceUnit(item)">{{item.labelIntermediary}}</div>
                                                                <div class="description" *ngIf="itemHasCount(item)">pc(s)</div>
                                                                <div class="value editable" style="float: right">
                                                                    <span class="value" contenteditable="true" [(contenteditableModel)]="item.sourceUnit" *ngIf="itemHasSourceUnit(item)"></span>
                                                                    <span class="value" contenteditable="true" [(contenteditableModel)]="item.count" *ngIf="itemHasCount(item)"></span>
                                                                </div>
                                                            </div>
                                                            <div class="values values2">
                                                                <div class="value editable" *ngIf="!itemHasCost0(item) || !itemHasCost1(item)">
                                                                    <span class="value" *ngIf="!itemHasCost0(item)"></span>
                                                                    <span class="currency" *ngIf="itemHasCost0(item)">$</span>
                                                                    <span class="value" contenteditable="true" [(contenteditableModel)]="item.costBase0" *ngIf="itemHasCost0(item)"></span>
                                                                </div>
                                                                <div class="values" style="float: left" *ngIf="itemHasCost0(item) && itemHasCost1(item)">
                                                                    <div class="value editable calctooltip">
                                                                        <span class="currency">$</span>
                                                                        <span class="value" contenteditable="true" [(contenteditableModel)]="item.costBase0"></span>
                                                                        <span class="calctooltiptext" *ngIf="item.labelBase0">{{item.labelBase0}}</span>
                                                                    </div>
                                                                    <div class="value editable calctooltip">
                                                                        <span class="currency">$</span>
                                                                        <span class="value" contenteditable="true" [(contenteditableModel)]="item.costBase1"></span>
                                                                        <span class="calctooltiptext" *ngIf="item.labelBase1">{{item.labelBase1}}</span>
                                                                    </div>
                                                                </div>
                                                                <div class="value">
                                                                    <span class="currency">$</span>
                                                                    <span class="value">{{item.cost}}</span>
                                                                </div>
                                                            </div>
                                                        </header>
                                                    </div>
                                                </div>
                                            </div>
                                        </accordion-group>
                                    </accordion>
                                </div>
                            </div>
                        </div>
                    </accordion-group>
                </accordion>
            </div>
        </article>
        <!-- /1st level -->
        <!-- 1st level -->
        <article class="featured">
            <div class="group">
                <header>
                    <div class="label">
                        <h3>Opening Bid</h3>
                    </div>
                    <div class="value editable">
                        <span class="currency">$</span>
                        <span class="input-value">
                            <input type="number" step="1" [(ngModel)]="propertyService.propertyRentData.startingBid" />
                        </span>
                    </div>
                </header>
            </div>
        </article>
        <!-- /1st level -->
    </div>
    <!-- Cash on cash -->
    <div class="widget coc">
        <header>
            <h2>Cash on Cash</h2>
            <div class="tab-selector-inline conc">
                <ul>
                    <li [ngClass]="{'active': coctab == 'tab-cash'}"
                        (click)="selectCoC('tab-cash', 'cash')">Cash</li>
                    <li [ngClass]="{'active': coctab == 'tab-financed'}"
                        (click)="selectCoC('tab-financed', 'financed')">Financed</li>
                </ul>
            </div>
        </header>
        <div id="tabs-container">
            <div class="tab" [ngClass]="{'is-active': coctab == 'tab-cash'}">
                <div class="data">
                    <table>
                        <tbody>
                            <tr>
                                <th>Income</th>
                                <td class="positive"
                                    *ngIf="propertyService.propertyRent.rent.type != 'other'">${{(propertyService.propertyRent.rent.value * 12) | number:'1.0-0'}}</td>
                                <td class="positive"
                                    *ngIf="propertyService.propertyRent.rent.type == 'other'">${{(propertyService.propertyRent.rent.otherValue * 12) | number:'1.0-0'}}</td>
                            </tr>
                            <tr>
                                <th>Expenses</th>
                                <td>${{propertyService.propertyRentData.expensesTotal | number:'1.0-0'}}</td>
                            </tr>
                            <tr>
                                <th>Repairs</th>
                                <td>${{propertyService.propertyRentData.repairTotal | number:'1.0-0'}}</td>
                            </tr>
                            <tr>
                                <th>Closing Costs</th>
                                <td>${{propertyService.propertyRentData.purchaseClosingCostTotal | number:'1.0-0'}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="featured">
                    <div [ngClass]="{'positive': propertyService.propertyRentData.annualProfit >= 0, 'negative': propertyService.propertyRentData.annualProfit < 0}">
                        <div class="label">Annual Profit</div>
                        <div class="value">${{propertyService.propertyRentData.absAnnualProfit | number:'1.0-0'}}</div>
                    </div>
                    <div class="invert" [ngClass]="{'positive': propertyService.propertyRentData.annualProfit >= 0, 'negative': propertyService.propertyRentData.annualProfit < 0}">
                        <div class="label">NOI</div>
                        <div class="value">{{propertyService.propertyRentData.capFormatted}}</div>
                    </div>
                </div>
            </div>
            <div class="tab" [ngClass]="{'is-active': coctab == 'tab-financed'}">
                <div class="data">
                    <table>
                        <tbody>
                            <tr>
                                <th>Income</th>
                                <td class="positive"
                                    *ngIf="propertyService.propertyRent.rent.type != 'other'">${{(propertyService.propertyRent.rent.value * 12) | number:'1.0-0'}}</td>
                                <td class="positive"
                                    *ngIf="propertyService.propertyRent.rent.type == 'other'">${{(propertyService.propertyRent.rent.otherValue * 12) | number:'1.0-0'}}</td>
                            </tr>
                            <tr>
                                <th>Expenses</th>
                                <td>${{(propertyService.propertyRentData.expensesTotal * 12) | number:'1.0-0'}}</td>
                            </tr>
                            <tr>
                                <th>Repairs</th>
                                <td>${{propertyService.propertyRentData.repairTotal | number:'1.0-0'}}</td>
                            </tr>
                            <tr>
                                <th>Closing Costs</th>
                                <td>${{propertyService.propertyRentData.purchaseClosingCostTotal | number:'1.0-0'}}</td>
                            </tr>
                            <tr>
                                <th>Mortgage Payment</th>
                                <td><bourbon-select [model]="propertyService.propertyRent.expenses.mortgage.selected"
                                        (modelUpdate)="propertyService.propertyRent.expenses.mortgage.selected = $event; propertyService.updatePropertyRentTotals()"
                                        [options]="propertyService.propertyRentData.expenses.mortgageOptions">
                                    </bourbon-select>
                                    <span class="input-value" *ngIf="'other' == propertyService.propertyRent.expenses.mortgage.selected">
                                        <input type="number" step="1" [(ngModel)]="propertyService.propertyRent.expenses.mortgage.otherValue" />
                                    </span>
                                    <span class="value field-value" *ngIf="'other' != propertyService.propertyRent.expenses.mortgage.selected">
                                        ${{propertyService.propertyRentData.expenses.mortgageSelectedValue | number:'1.0-0'}}
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <th>Loan Term</th>
                                <td><bourbon-select [model]="propertyService.propertyRent.expenses.loan.termSelected"
                                    (modelUpdate)="propertyService.propertyRent.expenses.loan.termSelected = $event; propertyService.updatePropertyRentTotals()"
                                    [options]="propertyService.propertyRentData.expenses.loanTermOptions">
                                </bourbon-select></td>
                            </tr>
                            <tr>
                                <th>Interest Rate</th>
                                <td><span class="input-value">
                                    <input type="text" [textMask]="{mask: percentMask, pipeValue: decimalPercent}"
                                        placeholder="_%"
                                        [ngModel]="decimalToPercent(propertyService.propertyRent.expenses.loan.interestRatePercent)"
                                        (ngModelChange)="propertyService.propertyRent.expenses.loan.interestRatePercent = $event" />
                                </span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="featured">
                    <div [ngClass]="{'positive': propertyService.propertyRentData.annualProfit >= 0, 'negative': propertyService.propertyRentData.annualProfit < 0}">
                        <div class="label">Annual Profit</div>
                        <div class="value">${{propertyService.propertyRentData.absAnnualProfit | number:'1.0-0'}}</div>
                    </div>
                    <div class="invert" [ngClass]="{'positive': propertyService.propertyRentData.annualProfit >= 0, 'negative': propertyService.propertyRentData.annualProfit < 0}">
                        <div class="label">NOI</div>
                        <div class="value">{{propertyService.propertyRentData.capFormatted}}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /Cash on cash -->
    <!-- Revisions -->
    <div class="widget revisions" *ngIf="propertyService.propertyRentRevisions.length > 0">
        <ngb-accordion class="group">
            <ngb-panel>
                <template ngbPanelTitle>
                    <header style="opacity: .5">
                        <div class="label">
                            <h2>Calculator Revisions</h2>
                        </div>
                    </header>
                </template>
                <template ngbPanelContent>
                    <article>
                        <ol>
                            <li *ngFor="let revision of propertyService.propertyRentRevisions">
                                <p class="revision-author">{{revision.author}}</p>
                                <p class="revision-time">{{formatTime(revision.time)}}</p>
                                <div class="revision-data">
                                    <ul>
                                        <li *ngFor="let rev of revision.revisions">{{propertyService.renderRevision(rev, 'rent')}}</li>
                                    </ul>
                                </div>
                                <div class="actions">
                                    <a (click)="revertRevision(revision)" class="button">Revert Changes</a>
                                </div>
                            </li>
                        </ol>
                    </article>
                </template>
            </ngb-panel>
        </ngb-accordion>
    </div>
    <!-- /Revisions -->
</div>
